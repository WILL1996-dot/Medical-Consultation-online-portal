<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>React Sign Up - StayHealthy</title>
  <link rel="stylesheet" href="signup.css" />
</head>
<body>
<header class="navbar">
    <div class="logo">StayHealthy <span class="icon">üßë‚Äç‚öïÔ∏è</span></div>
    <nav>
      <ul class="nav-links">
        <li><a href="gettingstarted.html">Home</a></li>
        <li><a href="services.html">Appointments</a></li>
        <li><a href="#">Health Blog</a></li>
        <li><a href="#">Reviews</a></li>
      </ul>
    </nav>
    <div class="auth-buttons">
      <a href="signup.html" class="btn-outline">Sign Up</a>
      <a href="login.html" class="btn-outline">Login</a>
    </div>
  </header>
  <div id="root"></div>

  <!-- React + ReactDOM from CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <!-- React App -->
  <script type="text/babel">
    const { useState } = React;

    function SignUpForm() {
      const [formData, setFormData] = useState({
        role: '',
        name: '',
        phone: '',
        email: '',
        password: ''
      });

      const [errors, setErrors] = useState({});
      const [users, setUsers] = useState([]);
      const [showPassword, setShowPassword] = useState(false);

      const handleChange = (e) => {
        const { id, value } = e.target;
        setFormData({ ...formData, [id]: value });
      };

      const validateForm = () => {
        const newErrors = {};
        if (!formData.role) newErrors.role = 'Role is required.';
        if (!formData.name) newErrors.name = 'Name is required.';
        if (!/^\d{7,15}$/.test(formData.phone)) newErrors.phone = 'Enter a valid phone number.';
        if (!/^\S+@\S+\.\S+$/.test(formData.email)) newErrors.email = 'Invalid email format.';
        if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters.';
        setErrors(newErrors);
        return Object.keys(newErrors).length === 0;
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        if (validateForm()) {
          const updatedUsers = [...users, formData];
			setUsers(updatedUsers);
			localStorage.setItem('registeredUsers', JSON.stringify(updatedUsers));

          alert('User Registered!');
          setFormData({ role: '', name: '', phone: '', email: '', password: '' });
          setErrors({});
        }
      };

      const handleReset = () => {
        setFormData({ role: '', name: '', phone: '', email: '', password: '' });
        setErrors({});
      };

      return (
        <div className="signup-container">
          <div className="signup-box">
            <h2>Sign Up</h2>
            <p>Already a member? <a href="#">Login</a></p>

            <form onSubmit={handleSubmit} onReset={handleReset}>
              <label htmlFor="role">Role</label>
              <select id="role" value={formData.role} onChange={handleChange}>
                <option value="">Select role</option>
                <option value="doctor">Doctor</option>
                <option value="nurse">Nurse</option>
                <option value="patient">Patient</option>
              </select>
              {errors.role && <div className="error">{errors.role}</div>}

              <label htmlFor="name">Name</label>
              <input type="text" id="name" value={formData.name} onChange={handleChange} placeholder="Enter your name" />
              {errors.name && <div className="error">{errors.name}</div>}

              <label htmlFor="phone">Phone</label>
              <input type="tel" id="phone" value={formData.phone} onChange={handleChange} placeholder="Enter your phone number" />
              {errors.phone && <div className="error">{errors.phone}</div>}

              <label htmlFor="email">Email</label>
              <input type="email" id="email" value={formData.email} onChange={handleChange} placeholder="Enter your email" />
              {errors.email && <div className="error">{errors.email}</div>}

              <label htmlFor="password">Password</label>
              <div className="password-field">
                <input
                  type={showPassword ? 'text' : 'password'}
                  id="password"
                  value={formData.password}
                  onChange={handleChange}
                  placeholder="Enter your password"
                />
                <span className="toggle" onClick={() => setShowPassword(!showPassword)}>üëÅÔ∏è</span>
              </div>
              {errors.password && <div className="error">{errors.password}</div>}

              <button type="submit" className="btn-submit">Submit</button>
              <button type="reset" className="btn-reset">Reset</button>
            </form>

            <h3>Registered Users:</h3>
            <ul>
              {users.map((user, index) => (
                <li key={index}>{user.name} ({user.role}) - {user.email}</li>
              ))}
            </ul>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<SignUpForm />);
  </script>
</body>
</html>
